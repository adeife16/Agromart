(function($) {
  $.fn.imageSlider = function(images) {
    return this.each(function() {
      var $container = $(this);
      var currentSlide = 0;
      var $slides = $('<div class="slider">');
      var $thumbnails = $('<div class="thumbnails">');

      // Create slide elements and thumbnails
      images.forEach(function(image, index) {
        var $slide = $('<img src="' + image.src + '" alt="' + image.alt + '">');
        var $thumbnail = $('<img src="' + image.src + '" alt="Thumbnail ' + (index + 1) + '">');

        $slides.append($slide);
        $thumbnails.append($thumbnail);
      });

      $container.append($slides).append($thumbnails);

      // Show the first slide and thumbnail
      $slides.children().eq(currentSlide).show();
      $thumbnails.children().eq(currentSlide).addClass('active');

      // Thumbnail click event
      $thumbnails.on('click', 'img', function() {
        var index = $thumbnails.children().index(this);
        showSlide(index);
      });

      // Function to show a specific slide with smoother animation
      function showSlide(index) {
        var $currentSlide = $slides.children().eq(currentSlide);
        var $nextSlide = $slides.children().eq(index);

        // Fade out the current slide
        $currentSlide.fadeOut(400, function() {
          // After fadeOut, fade in the next slide
          $nextSlide.fadeIn(400);
        });

        $thumbnails.children().removeClass('active');
        $thumbnails.children().eq(index).addClass('active');

        currentSlide = index;
      }
    });
  };
})(jQuery);
